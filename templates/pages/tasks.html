{% extends "layouts/base_layout.html" %}

{% block main %}
    {% for task in tasks %}
        <section class="card card-default w-50 mx-auto">
            <h4 class="card-header"> {{ task.title }}</h4>
            {{ task.description }}
            <br>
            {% if task.completed == 1 %}
            <form id="checkbox_form{{ task.id }}done" action="task_status/{{ task.id }}" method="POST">
                <label class="container">Завершено
                    <input type="checkbox" checked onclick="document.getElementById('checkbox_form{{ task.id }}done').submit()">
                    <span class="checkmark"></span>
                </label>
            </form>
            {% else %}
            <form id="checkbox_form{{ task.id }}undone" action="task_status/{{ task.id }}" method="POST">
                <label class="container">Не завершено
                    <input type="checkbox" onclick="document.getElementById('checkbox_form{{ task.id }}undone').submit()">
                    <span class="checkmark"></span>
                </label>
            </form>
            {% endif %}
            <form action="/tasks/{{ task.id }}" method="GET">
                <button type="submit" class="btn btn-primary w-100 mx-auto">Изменить</button>
            </form>
        </section>
    {% endfor %}
    <form action="/task" method="GET" class="d-flex justify-content-center">
        <button type="submit" class="btn btn-primary">Добавить новое задание</button>
    </form>
{% endblock %}